{% extends "base.html" %}

{% block content %}
<h3 class="mb-4">Room Applications</h3>

{% for app, room, renter in apps %}
<div class="card shadow-sm mb-3">
  <div class="card-body">

    <div class="row align-items-center">

      <!-- Room Info -->
      <div class="col-md-4">
        <h5 class="mb-1">{{ room.area }}, {{ room.city }}</h5>
        <small class="text-muted">Rs. {{ room.rent }} / month</small>
      </div>

      <!-- Renter Info -->
      <div class="col-md-3">
        <strong>{{ renter.name }}</strong><br>
        <small class="text-muted">{{ renter.email }}</small>
      </div>

      <!-- Status -->
      <div class="col-md-2">
        {% if app.status == "pending" %}
          <span class="badge bg-warning">Pending</span>
        {% elif app.status == "accepted" %}
          <span class="badge bg-success">Accepted</span>
        {% else %}
          <span class="badge bg-danger">Rejected</span>
        {% endif %}
      </div>

      <!-- Actions -->
      <div class="col-md-3 text-end">
        {% if app.status == "pending" %}
          <a href="/owner/accept/{{ app.id }}" class="btn btn-success btn-sm me-2">
            Accept
          </a>
          <a href="/owner/reject/{{ app.id }}" class="btn btn-danger btn-sm">
            Reject
          </a>

        {% elif app.status == "accepted" %}
          <a href="/chat/{{ room.id }}"
             class="btn btn-primary btn-sm position-relative">
            Chat
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
              New
            </span>
          </a>
        {% endif %}
      </div>

    </div>

  </div>
</div>
{% else %}
<p>No applications yet.</p>
{% endfor %}

{% endblock %}
